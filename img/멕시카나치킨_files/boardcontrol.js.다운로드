////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function goPwdpage(sort,index){
	document.boardActfrm.idx.value=index;

	$.ajax({
		type:"post",
		url: "/board/bbs_pwdinput.asp",
		data:{"sort":sort,"idx":index},
		dataType:"html",
		async: true,
		beforeSend : function(){
			popupLoadingOpen();
		}
	}).done(function(data){
		fnLayerPopupOpen(data);
	})
}

function goMemberCheck(sort,index){
	var f=document.boardActfrm;
	if (sort=="modify"){
		f.action="";
		f.mode.value=sort;
	}else{
		var val = confirm("게시물을 삭제하시겠습니까?");
		if (val){
			f.action="/board/ok_bbsDel.asp";
		}else{
			return;
		}
	}
	f.idx.value=index;
	f.submit();
}

//게시판 비밀번호 컨트롤///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function goPwdpage_main(sort,index,bbscode,actpage){
	var f=document.boardActfrm;
	f.action=actpage;
	f.BBSCode.value=bbscode;
	f.sort.value=sort;
	f.idx.value=index;

	$.ajax({
		type:"post",
		url: "/board/bbs_pwdinput.asp",
		data:{"sort":sort,"idx":index},
		dataType:"html",
		async: true,
		beforeSend : function(){
			popupLoadingOpen();
		}
	}).done(function(data){
		fnLayerPopupOpen(data);
	})
}

function boardcheckpwd(sort){
	var f=document.passFrm;

	if(f.pwd.value==""){
		alert("비밀번호를 입력하세요.");
		f.pwd.focus();
		return;
	}
	var params = $("#passFrm").serialize();
	$.ajax({type:"POST", url:"/ajaxpage/boardPassSet.asp",data:params,dataType:"html"
	}).done(function(msg){
		if (msg!="")	{
			alert(msg);
		}else{
			if(sort=="view"){
				document.boardActfrm.mode.value="view";
			}else if(sort=="bbsmodify"){
				document.boardActfrm.action=document.boardActfrm.prepage.value;
				document.boardActfrm.mode.value="modify";
				document.boardActfrm.prepage.value="";
			}else if(sort=="bbsdel"){
				document.boardActfrm.action='/board/ok_bbsdel.asp';
			}
			document.boardActfrm.submit();
		}
	});
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//게시판 함수//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function searchGo(){
	var f=document.searchfrm;
	f.submit();
}

function counselSendit(){
	var f=document.boardfrm;

	if(f.writer.value==""){
		alert("이름을 입력하세요.");
		f.writer.focus();
		return;
	}
	if(f.tel[0].value==""){
		alert("연락처를 입력하세요.");
		f.tel[0].focus();
		return;
	}
	if(f.tel[1].value==""){
		alert("연락처를 입력하세요.");
		f.tel[1].focus();
		return;
	}
	if(f.tel[2].value==""){
		alert("연락처를 입력하세요.");
		f.tel[2].focus();
		return;
	}
	if(f.email[0].value==""){
		alert("이메일을 입력하세요.");
		f.email[0].focus();
		return;
	}
	if(f.email[1].value==""){
		alert("이메일을 입력하세요.");
		f.email[1].focus();
		return;
	}
	if (f.note2.value==""){
		alert('예상평수를 입력해 주세요.');
		f.note2.focus();
		return;
	}
	if (f.note3.value==""){
		alert('개설희망지역을 입력해 주세요.');
		f.note3.focus();
		return;
	}
	if(f.title.value==""){
		alert("제목을 입력하세요");
		f.title.focus();
		return;
	}
	if (f.content.value==""){
		alert('내용을 입력해 주세요.');
		f.content.focus();
		return;
	}
	f.editorYN.value=0;

	if ( $("#agree").length > 0){
		if (!$("#agree").is(":checked")){
			alert("개인정보 취급방침 동의 여부에 체크해주세요.");
			return;
		}
	}
	f.submit();
}


function sendit(){
	var f=document.boardfrm;

	if( document.getElementById("selectBoardsort")){
		if(f.boardsort.value==""){
			alert("분류를 선택하세요.");
			f.boardsort.focus();
			return;
		}
	}

	if(f.writer.value==""){
		alert("이름을 입력하세요.");
		f.writer.focus();
		return;
	}

	if(f.tel){
		if(f.tel[0].value==""){
			alert("연락처를 입력하세요.");
			f.tel[0].focus();
			return;
		}
		if(f.tel[1].value==""){
			alert("연락처를 입력하세요.");
			f.tel[1].focus();
			return;
		}
		if(f.tel[2].value==""){
			alert("연락처를 입력하세요.");
			f.tel[2].focus();
			return;
		}
	}

	if(f.email){
		if(f.email[0].value==""){
			alert("이메일을 입력하세요.");
			f.email[0].focus();
			return;
		}
		if(f.email[1].value==""){
			alert("이메일을 입력하세요.");
			f.email[1].focus();
			return;
		}
	}

	if(f.bbscode.value == "3"){
		if(!f.note1.value){
			alert("지역 또는 가맹점을 입력하세요.");
			f.note1.focus();
			return;
		}
	}

	if(f.pass){
		if(f.pass.value==""){
			alert("글 비밀번호를 입력하세요.");
			f.pass.focus();
			return;
		}
	}
	if(f.title.value==""){
		alert("제목을 입력하세요");
		f.title.focus();
		return;
	}
	/*if(CKEDITOR.instances.ucontent){
		if(CKEDITOR.instances.ucontent.getData() == '') {
			alert('내용을 입력해 주세요.');
			CKEDITOR.instances.ucontent.focus();
			return;
		}
		f.editorYN.value=1;
	}else{*/
		if (f.content.value==""){
			alert('내용을 입력해 주세요.');
			f.content.focus();
			return;
		}
		f.editorYN.value=0;
	//}
	if(f.imgfiles){
		if(uploadImg_check(f.imgfiles.value,"이미지를 올바로 입력하세요.")==false){
			return;
		}
	}
	if ( $("#agree").length > 0){
		if (!$("#agree").is(":checked")){
			alert("개인정보 취급방침 동의 여부에 체크해주세요.");
			return;
		}
	}
	f.submit();
}
function modifysendit(){
	var f=document.boardfrm;

	if( document.getElementById("selectBoardsort")){
		if(f.boardsort.value==""){
			alert("진료과를 선택하세요.");
			f.boardsort.focus();
			return;
		}
	}
	if(f.writer.value==""){
		alert("이름을 입력하세요.");
		f.writer.focus();
		return;
	}
	if(f.pass){
		if(f.pass.value==""){
			alert("글 비밀번호를 입력하세요.");
			f.pass.focus();
			return;
		}
	}
	if(f.title.value==""){
		alert("제목을 입력하세요");
		f.title.focus();
		return;
	}
	if(CKEDITOR.instances.ucontent){
		if(CKEDITOR.instances.ucontent.getData() == '') {
			alert('내용을 입력해 주세요.');
			CKEDITOR.instances.ucontent.focus();
			return;
		}
		f.editorYN.value=1;
	}else{
		if (f.content.value==""){
			alert('내용을 입력해 주세요.');
			return;
		}
		f.editorYN.value=0;
	}
	if(f.imgfiles){
		if(f.imgDel_Chk.checked){
			if(uploadImg_check(f.imgfiles.value,"이미지를 올바로 입력하세요.")==false){
				return;
			}
		}
	}
	f.submit();
}
function replysendit(){
	var f=document.boardfrm;
	if(f.writer.value==""){
		alert("이름을 입력하세요.");
		f.writer.focus();
		return;
	}
	if(f.pass){
		if(f.pass.value==""){
			alert("글 비밀번호를 입력하세요.");
			f.pass.focus();
			return;
		}
	}
	if(f.title.value==""){
		alert("제목을 입력하세요");
		f.title.focus();
		return;
	}
	if(CKEDITOR.instances.ucontent){
		if(CKEDITOR.instances.ucontent.getData() == '') {
			alert('내용을 입력해 주세요.');
			CKEDITOR.instances.ucontent.focus();
			return;
		}
		f.editorYN.value=1;
	}else{
		f.editorYN.value=0;
	}
	f.submit();
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//게시판 코멘트 컨트롤/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
var gb_ViewDivID="";

function viewBoardCommentArea(index,bbscode,page){
	var params = "idx="+index+"&bbscode="+bbscode+"&page="+page;
	$.ajax({type:"POST", url:"/ajaxpage/boardCommentArea.asp",data:params,dataType:"html"
	}).done(function(msg){
		document.getElementById("boardCommentDiv").innerHTML=msg;
	});
}
function boardcommentGo(){
	f=document.commentfrm;

	if(f.name){
		if(f.name.value==""){
			alert("이름을 입력해주세요.");
			f.name.focus();
			return;
		}
	}
	if(f.pwd){
		if(f.pwd.value==""){
			alert("비밀번호를 입력해주세요.");
			f.pwd.focus();
			return;
		}
	}
	if(f.content.value==false){
		alert("내용을 입력해주세요.");
		f.content.focus();
		return;
	}

	var params = $("#commentfrm").serialize();
	$.ajax({type:"POST", url:"/ajaxpage/BoardCommentAddOK.asp",data:params,dataType:"script"
	}).done(function(msg){
	});
}
function viewboardCommentReply(targetDiv,index,bbscode,page){
	if(gb_ViewDivID!=""){
		document.getElementById(gb_ViewDivID).style.display="none";
	}
	gb_ViewDivID=targetDiv;
	document.getElementById(gb_ViewDivID).style.display="inline";

	var params = "idx="+index+"&bbscode="+bbscode+"&page="+page;
	$.ajax({type:"POST", url:"/ajaxpage/boardCommentReply.asp",data:params,dataType:"html"
	}).done(function(msg){
		document.getElementById(targetDiv).innerHTML=msg;
	});
}
function boardcommentReply(thisFORM){
	var f=eval(thisFORM)
	
	targetPage="/ajaxpage/BoardCommentReplyOK.asp"

	if(f.name){
		if(f.name.value==""){
			alert("이름을 입력해주세요.");
			f.name.focus();
			return;
		}
	}
	if(f.pwd){
		if(f.pwd.value==""){
			alert("비밀번호를 입력해주세요.");
			f.pwd.focus();
			return;
		}
	}
	if(f.content.value==false){
		alert("내용을 입력해주세요.");
		f.content.focus();
		return;
	}

	var params = $("#"+thisFORM).serialize();

	$.ajax({type:"POST", url:targetPage,data:params,dataType:"script"
	}).done(function(msg){
	});
}
function boardcommentEdit(thisFORM){
	var f=eval(thisFORM)
	
	targetPage="/ajaxpage/BoardCommentEditOK.asp"

	if(f.content.value==false){
		alert("내용을 입력해주세요.");
		f.content.focus();
		return;
	}

	var params = $("#"+thisFORM).serialize();
	$.ajax({type:"POST", url:targetPage,data:params,dataType:"script"
	}).done(function(msg){
	});
}
function boardcommentEditView(targetDiv,memYN,index,bbscode,page){
	if(gb_ViewDivID!=""){
		document.getElementById(gb_ViewDivID).style.display="none";
	}
	gb_ViewDivID=targetDiv;
	document.getElementById(gb_ViewDivID).style.display="inline";

	if(memYN==''){
		$.ajax({
			type:"post",
			url: "/ajaxpage/boardCommentPwdinput.asp",
			data:{"mode":"modify","idx":index,"bbscode":bbscode,"page":page,"targetDiv":targetDiv},
			dataType:"html",
			async: true,
			beforeSend : function(){
				popupLoadingOpen();
			}
		}).done(function(data){
			fnLayerPopupOpen(data);
		})
	}else{
		var params = "idx="+index+"&bbscode="+bbscode+"&page="+page;
		$.ajax({type:"POST", url:"/ajaxpage/boardCommentEdit.asp",data:params,dataType:"html"
		}).done(function(msg){
			if(msg=="noData"){
				alert("게시물 정보를 찾을수 없습니다.\n다시시도해주세요.");
			}else if(msg=="noMember"){
				alert("작성자 본인만 수정가능합니다.");
			}else{
				document.getElementById(targetDiv).innerHTML=msg;
			}
		});
	}
}
function viewboardCommentPwdInput(targetDiv,memYN,index,bbscode,page){
	if(memYN==''){
		$.ajax({
			type:"post",
			url: "/ajaxpage/boardCommentPwdinput.asp",
			data:{"idx":index,"bbscode":bbscode,"page":page,"targetDiv":targetDiv},
			dataType:"html",
			async: true,
			beforeSend : function(){
				popupLoadingOpen();
			}
		}).done(function(data){
			fnLayerPopupOpen(data);
		})
	}else{
		var val=confirm("해당 코멘트를 삭제하시겠습니까?");
		if (val){

			var params = "idx="+index+"&bbscode="+bbscode+"&page="+page;
			$.ajax({type:"POST", url:"/ajaxpage/boardCommentDel.asp",data:params,dataType:"script"
			}).done(function(msg){
			});
		}
	}
}
function boardcommentcheckpwd(){
	if(document.boardcommentpwdchk.pwd.value==""){
		alert("비밀번호를 입력하세요.");
		document.boardcommentpwdchk.pwd.focus();
		return;
	}
	if (document.boardcommentpwdchk.mode.value=="modify"){
		targetDiv=document.boardcommentpwdchk.targetDiv.value;
		var params = $("#boardcommentpwdchk").serialize();

		$.ajax({type:"POST", url:"/ajaxpage/boardCommentEdit.asp",data:params,dataType:"html"
		}).done(function(msg){
			if(msg=="noData"){
				alert("게시물 정보를 찾을수 없습니다.\n다시시도해주세요.");
			}else if(msg=="noPassword"){
				alert("비밀번호가 일치하지 않습니다.");
			}else if(msg=="noMember"){
				alert("작성자 본인만 수정가능합니다.");
			}else{
				document.getElementById(targetDiv).innerHTML=msg;
				fnLayerPopupClose();
			}
		});
	}else{
		var params = $("#boardcommentpwdchk").serialize();
		$.ajax({type:"POST", url:"/ajaxpage/boardCommentDel.asp",data:params,dataType:"script"
		}).done(function(msg){
			fnLayerPopupClose();
		});
	}
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////